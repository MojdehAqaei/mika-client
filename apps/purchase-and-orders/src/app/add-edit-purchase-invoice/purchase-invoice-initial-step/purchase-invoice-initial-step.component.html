<section [formGroup]="formGroup">
  <div class="row">
    <div class="col s12 l4">
      <label class="cl-input-label cl-required">{{
        'purchase-and-orders.invoice.purchase-order' | translate
      }}</label>
      <cl-select
        formControlName="order"
        [options]="
          purchaseInvoiceFacade.purchaseInvoiceStore.state$().orderList$()
        "
        [placeholder]="'select' | translate"
        [filterable]="true"
        (onSelect)="setOrder($event)"
        clValidatorErrors
        [showValidatorErrors]="
          formGroup.controls['order'].touched &&
          !!formGroup.controls['order'].errors
        "
      />
    </div>

    <!-- auto generated code -->
    <div class="col s12 l4">
      <label class="cl-input-label">{{
        'purchase-and-orders.invoice.invoice-code' | translate
      }}</label>
      <cl-input-text formControlName="autoGeneratedCode" [disabled]="true" />
    </div>

    <!-- delivery state -->
    <div class="col s12 l4">
      <label class="cl-input-label">{{
        'purchase-and-orders.invoice.invoice-state' | translate
      }}</label>
      <cl-input-text formControlName="invoiceStateString" />
    </div>
  </div>

  <div class="row">
    <!-- deliverer -->
    <div class="col s12 l4">
      <label class="cl-input-label cl-required">{{
        'purchase-and-orders.invoice.seller' | translate
      }}</label>
      <cl-select
        formControlName="seller"
        url="prs-corps/search/actives"
        [filterable]="true"
        [lazyFilter]="true"
        [optionLabel]="['title', 'name']"
        [httpContext]="httpContext"
        clValidatorErrors
        (onSelect)="setSellerLabel($event)"
        [showValidatorErrors]="
          formGroup.controls['seller'].touched &&
          !!formGroup.controls['seller'].errors
        "
        [placeholder]="'select' | translate"
      />
    </div>

    <!-- seller invoice code  -->
    <div class="col s12 l4">
      <label class="cl-input-label cl-required">{{
        'purchase-and-orders.invoice.seller-invoice-code' | translate
      }}</label>
      <cl-input-text
        clKeyFilter="num"
        formControlName="invoiceNumber"
        clValidatorErrors
        [showValidatorErrors]="
          formGroup.controls['invoiceNumber'].touched &&
          !!formGroup.controls['invoiceNumber'].errors
        "
      />
    </div>

    <!-- delivery date -->
    <div class="col s12 l4">
      <label class="cl-input-label cl-required">{{
        'purchase-and-orders.invoice.seller-invoice-date' | translate
      }}</label>
      <cl-date-picker
        [placeholder]="'select-date' | translate"
        formControlName="date"
        clValidatorErrors
        [clear]="true"
        [showValidatorErrors]="
          formGroup.controls['date'].touched &&
          !!formGroup.controls['date'].errors
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      <label class="cl-input-label">{{ 'description' | translate }}</label>
      <cl-input-text
        [placeholder]="
          'purchase-and-orders.invoice.write-your-note-description-here'
            | translate
        "
        formControlName="description"
      />
    </div>
  </div>
  <!-- attachments -->
  <div class="row invoice-attachments">
    <div class="col s12 cl-form-field">
      <view-heading
        [title]="'attachments.upload' | translate"
        [icon]="'attach_file'"
      />
      <cl-file-uploader
        formControlName="attachedFiles"
        fileBtnType="info"
        [auto]="false"
        [customUpload]="true"
        [accept]="appFacade.appStore.state$().fileAttachmentConfig$().fileType"
        [maxFileSize]="
          appFacade.appStore.state$().fileAttachmentConfig$().maxUploadSize
        "
        [fileLimit]="
          appFacade.appStore.state$().fileAttachmentConfig$()
            .maximumNumberOfFile
        "
        [deleteConfirmDialogConfig]="confirmationConfig"
        [fileDeleteUrl]="
          'invoice-document/deleteFile/' +
          formGroup.controls['id'].value +
          '?' +
          deleteFileHttpParams()
        "
        (onFileActionMenuOpen)="deleteAttachment($event)"
        clValidatorErrors
        [showValidatorErrors]="!!formGroup.controls['attachedFiles'].errors"
      />
    </div>
  </div>
</section>
