<section [formGroup]="formGroup">
  <div class="row no-bottom-margin">

    <!-- fiscal year -->
    <div class="col s12 l4 cl-form-field">
      <label class="cl-input-label cl-required">{{ 'stockroom.fiscal-year.' | translate }}</label>
      <cl-select formControlName="fiscalYearId"
                 [url]="'fiscal-periods/' + endpointsEnum.findByKeyword"
                 [placeholder]="warehousingFacade.warehousingStore.state$().editMode$() ? formGroup.controls['fiscalYearTitle'].value : ('select' | translate)"
                 [filterable]="true"
                 [lazyFilter]="true"
                 [optionLabel]="['title']"
                 [httpContext]="httpContext"
                 (onSelect)="toggleStockroom()"
                 optionValue="id"
                 clValidatorErrors
                 [showValidatorErrors]="formGroup.controls['fiscalYearId'].touched && !!formGroup.controls['fiscalYearId'].errors"/>
    </div>

    <!-- auto generated code -->
    <div class="col s12 l4 cl-form-field">
      <label class="cl-input-label">{{ 'stockroom.warehousing.code' | translate }}</label>
      <cl-input-text formControlName="autoGeneratedCode"/>
    </div>

    <!-- state -->
    <div class="col s12 l4 cl-form-field">
      <label class="cl-input-label">{{ 'stockroom.warehousing.state' | translate }}</label>
      <cl-input-text formControlName="stateString"/>
    </div>
  </div>


  <div class="row no-bottom-margin">
    <!-- stockroom -->
    <div class="col s12 l4 cl-form-field">
      <label class="cl-input-label cl-required">{{ 'stockroom.' | translate }}</label>
      <cl-select formControlName="stockroomId"
                 [url]="'inventories/accessible-active-in-fiscalPeriod/' + formGroup.controls['fiscalYearId'].value"
                 [placeholder]="warehousingFacade.warehousingStore.state$().editMode$() ? formGroup.controls['stockroomTitle'].value : ('select' | translate)"
                 [filterable]="true"
                 [lazyFilter]="true"
                 [optionLabel]="['title', 'code']"
                 [httpContext]="httpContext"
                 optionValue="id"
                 clValidatorErrors
                 [showValidatorErrors]="formGroup.controls['stockroomId'].touched && !!formGroup.controls['stockroomId'].errors"/>
    </div>

    <!-- start date -->
    <div class="col s12 l4 cl-form-field">
      <label class="cl-input-label cl-required">{{ 'start-date' | translate }}</label>
      <cl-date-picker formControlName="startDate"
                      [clear]="true"
                      [range]="{min: '', max: formGroup.controls['endDate'].value}"
                      clValidatorErrors
                      [showValidatorErrors]="formGroup.controls['startDate'].touched && !!formGroup.controls['startDate'].errors"/>
    </div>

    <!-- end date -->
    <div class="col s12 l4 cl-form-field">
      <label class="cl-input-label cl-required">{{ 'end-date' | translate }}</label>
      <cl-date-picker formControlName="endDate"
                      [clear]="true"
                      [range]="{min: formGroup.controls['startDate'].value, max: ''}"
                      clValidatorErrors
                      [showValidatorErrors]="formGroup.controls['endDate'].touched && !!formGroup.controls['endDate'].errors"/>
    </div>
  </div>


  <!-- description -->
  <div class="row no-bottom-margin">
    <div class="col s12 cl-form-field">
      <label class="cl-input-label">{{ 'description' | translate }}</label>
      <cl-text-area formControlName="description"
                    [maxLength]="500"
                    [showLength]="true"
                    [placeholder]="'description' | translate"
                    clValidatorErrors
                    [showValidatorErrors]="formGroup.controls['description'].touched && !!formGroup.controls['description'].errors"/>
    </div>
  </div>

  <!-- attachments -->
  <div class="row warehousing-attachments">
    <div class="col s12 cl-form-field">
      <view-heading [title]=" 'attachments.upload' | translate" [icon]="'attach_file'"/>
      <cl-file-uploader formControlName="attachedFiles"
                        fileBtnType="info"
                        [auto]="false"
                        [customUpload]="true"
                        [accept]="appFacade.appStore.state$().fileAttachmentConfig$().fileType"
                        [maxFileSize]="appFacade.appStore.state$().fileAttachmentConfig$().maxUploadSize"
                        [fileLimit]="appFacade.appStore.state$().fileAttachmentConfig$().maximumNumberOfFile"
                        [deleteConfirmDialogConfig]="confirmationConfig"
                        [fileDeleteUrl]="'inventory-count-attachments/deleteFile/' + formGroup.controls['id'].value + '?' + deleteFileHttpParams()"
                        (onFileActionMenuOpen)="deleteAttachment($event)"
                        clValidatorErrors
                        [showValidatorErrors]="!!formGroup.controls['attachedFiles'].errors"/>

    </div>
  </div>
</section>
